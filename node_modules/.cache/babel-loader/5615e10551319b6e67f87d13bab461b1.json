{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tarus\\\\Documents\\\\Marketplace-ReactJS-Project\\\\client\\\\src\\\\Pages\\\\CreateSell.js\";\nimport { Component } from 'react';\nimport { Form, Button, Col, Spinner, Alert } from 'react-bootstrap';\nimport { createProduct } from '../services/productData';\nimport SimpleSider from '../components/Siders/SimpleSider';\nimport '../components/CreateSell/CreateSell.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass AddProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: \"\",\n      price: \"\",\n      description: \"\",\n      city: \"\",\n      category: \"\",\n      image: \"\",\n      loading: false,\n      alertShow: false,\n      errors: []\n    };\n    this.onChangeHandler = this.onChangeHandler.bind(this);\n    this.onSubmitHandler = this.onSubmitHandler.bind(this);\n  }\n\n  onChangeHandler(e) {\n    e.preventDefault();\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n\n    if (e.target.files) {\n      this.setState({\n        image: e.target.files[0]\n      });\n    }\n  }\n\n  onSubmitHandler(e) {\n    e.preventDefault();\n    let {\n      title,\n      price,\n      description,\n      city,\n      category,\n      image\n    } = this.state;\n    let obj = {\n      title,\n      price,\n      description,\n      city,\n      category\n    };\n    this.setState({\n      loading: true\n    });\n    this.getBase64(image).then(data => {\n      obj['image'] = data;\n      createProduct(obj).then(res => {\n        if (res.error) {\n          this.setState({\n            loading: false\n          });\n          this.setState({\n            errors: res.error\n          });\n          this.setState({\n            alertShow: true\n          });\n        } else {\n          this.props.history.push(`/categories/${category}/${res.productId}/details`);\n        }\n      }).catch(err => console.error('Creating product err: ', err));\n    }).catch(err => console.error('Converting to base64 err: ', err));\n  }\n\n  getBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(SimpleSider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"heading\",\n          children: \"Add a Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.onSubmitHandler,\n          children: [this.state.alertShow && /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"danger\",\n            onClose: () => this.setState({\n              alertShow: false\n            }),\n            dismissible: true,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: this.state.errors\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridTitle\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                placeholder: \"Enter title\",\n                name: \"title\",\n                required: true,\n                onChange: this.onChangeHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridPrice\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"number\",\n                step: \"0.01\",\n                placeholder: \"Price\",\n                name: \"price\",\n                required: true,\n                onChange: this.onChangeHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formGridDescription.ControlTextarea1\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"textarea\",\n              rows: 3,\n              name: \"description\",\n              required: true,\n              onChange: this.onChangeHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridCity\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"City\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                name: \"city\",\n                placeholder: \"Sofia\",\n                required: true,\n                onChange: this.onChangeHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridCategory\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                as: \"select\",\n                defaultValue: \"Choose...\",\n                name: \"category\",\n                required: true,\n                onChange: this.onChangeHandler,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Choose...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"properties\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"electronics\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"clothes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"toys\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"home\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"garden\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridImage\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                name: \"image\",\n                type: \"file\",\n                required: true,\n                onChange: this.onChangeHandler\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), this.state.loading ? /*#__PURE__*/_jsxDEV(Button, {\n            className: \"col-lg-12\",\n            variant: \"dark\",\n            disabled: true,\n            children: [\"Please wait... \", /*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 48\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            className: \"col-lg-12\",\n            variant: \"dark\",\n            type: \"submit\",\n            children: \"Add product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default AddProduct;","map":{"version":3,"sources":["C:/Users/tarus/Documents/Marketplace-ReactJS-Project/client/src/Pages/CreateSell.js"],"names":["Component","Form","Button","Col","Spinner","Alert","createProduct","SimpleSider","AddProduct","constructor","props","state","title","price","description","city","category","image","loading","alertShow","errors","onChangeHandler","bind","onSubmitHandler","e","preventDefault","setState","target","name","value","files","obj","getBase64","then","data","res","error","history","push","productId","catch","err","console","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","render"],"mappings":"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","sourcesContent":["import { Component } from 'react';\r\nimport { Form, Button, Col, Spinner, Alert } from 'react-bootstrap';\r\nimport { createProduct } from '../services/productData';\r\nimport SimpleSider from '../components/Siders/SimpleSider';\r\nimport '../components/CreateSell/CreateSell.css';\r\n\r\nclass AddProduct extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { title: \"\", price: \"\", description: \"\", city: \"\", category: \"\", image: \"\", loading: false, alertShow: false, errors: [] };\r\n        this.onChangeHandler = this.onChangeHandler.bind(this);\r\n        this.onSubmitHandler = this.onSubmitHandler.bind(this);\r\n    }\r\n\r\n    onChangeHandler(e) {\r\n        e.preventDefault();\r\n        this.setState({ [e.target.name]: e.target.value });\r\n        if (e.target.files) {\r\n            this.setState({ image: e.target.files[0] })\r\n        }\r\n    };\r\n\r\n    onSubmitHandler(e) {\r\n        e.preventDefault();\r\n        let { title, price, description, city, category, image } = this.state;\r\n        let obj = { title, price, description, city, category }\r\n        this.setState({ loading: true })\r\n        this.getBase64(image)\r\n            .then((data) => {\r\n                obj['image'] = data;\r\n                createProduct(obj)\r\n                    .then(res => {\r\n                        if (res.error) {\r\n                            this.setState({ loading: false })\r\n                            this.setState({ errors: res.error })\r\n                            this.setState({ alertShow: true })\r\n                        } else {\r\n                            this.props.history.push(`/categories/${category}/${res.productId}/details`)\r\n                        }\r\n                    })\r\n                    .catch(err => console.error('Creating product err: ', err))\r\n            })\r\n            .catch(err => console.error('Converting to base64 err: ', err));\r\n    }\r\n\r\n    getBase64(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <SimpleSider />\r\n                <div className='container'>\r\n                    <h1 className=\"heading\">Add a Product</h1>\r\n                    <Form onSubmit={this.onSubmitHandler}>\r\n                        {this.state.alertShow &&\r\n                            <Alert variant=\"danger\" onClose={() => this.setState({ alertShow: false })} dismissible>\r\n                                <p>\r\n                                    {this.state.errors}\r\n                                </p>\r\n                            </Alert>\r\n                        }\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} controlId=\"formGridTitle\">\r\n                                <Form.Label>Title</Form.Label>\r\n                                <Form.Control type=\"text\" placeholder=\"Enter title\" name=\"title\" required onChange={this.onChangeHandler} />\r\n                            </Form.Group>\r\n\r\n                            <Form.Group as={Col} controlId=\"formGridPrice\">\r\n                                <Form.Label>Price</Form.Label>\r\n                                <Form.Control type=\"number\" step=\"0.01\" placeholder=\"Price\" name=\"price\" required onChange={this.onChangeHandler} />\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n\r\n                        <Form.Group controlId=\"formGridDescription.ControlTextarea1\">\r\n                            <Form.Label>Description</Form.Label>\r\n                            <Form.Control as=\"textarea\" rows={3} name=\"description\" required onChange={this.onChangeHandler} />\r\n                        </Form.Group>\r\n\r\n                        <Form.Row>\r\n                            <Form.Group as={Col} controlId=\"formGridCity\">\r\n                                <Form.Label>City</Form.Label>\r\n                                <Form.Control name=\"city\" placeholder=\"Sofia\" required onChange={this.onChangeHandler} />\r\n                            </Form.Group>\r\n\r\n                            <Form.Group as={Col} controlId=\"formGridCategory\">\r\n                                <Form.Label>Category</Form.Label>\r\n                                <Form.Control as=\"select\" defaultValue=\"Choose...\" name=\"category\" required onChange={this.onChangeHandler}>\r\n                                    <option>Choose...</option>\r\n                                    <option>properties</option>\r\n                                    <option>auto</option>\r\n                                    <option>electronics</option>\r\n                                    <option>clothes</option>\r\n                                    <option>toys</option>\r\n                                    <option>home</option>\r\n                                    <option>garden</option>\r\n                                </Form.Control>\r\n                            </Form.Group>\r\n\r\n                            <Form.Group as={Col} controlId=\"formGridImage\" >\r\n                                <Form.Label>Image</Form.Label>\r\n                                <Form.Control name=\"image\" type=\"file\" required onChange={this.onChangeHandler} />\r\n                            </Form.Group>\r\n                        </Form.Row>\r\n                        {this.state.loading ?\r\n                            <Button className=\"col-lg-12\" variant=\"dark\" disabled >\r\n                                Please wait... <Spinner animation=\"border\" />\r\n                            </Button>\r\n                            :\r\n                            <Button className=\"col-lg-12\" variant=\"dark\" type=\"submit\">Add product</Button>\r\n                        }\r\n                    </Form>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}