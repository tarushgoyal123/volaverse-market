{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tarus\\\\Documents\\\\Marketplace-ReactJS-Project\\\\client\\\\src\\\\components\\\\Details\\\\Aside\\\\Aside.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext, useEffect } from 'react';\nimport { Context } from '../../../ContextStore';\nimport { Button, Modal, Form, OverlayTrigger, Tooltip, Col, Spinner } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { RiMessage3Fill } from 'react-icons/ri';\nimport { GrEdit } from 'react-icons/gr';\nimport { MdArchive } from 'react-icons/md';\nimport { BsFillPersonFill } from 'react-icons/bs';\nimport { MdEmail, MdPhoneAndroid } from 'react-icons/md';\nimport { FaSellsy } from 'react-icons/fa';\nimport { archiveSell } from '../../../services/productData';\nimport { createChatRoom } from '../../../services/messagesData';\nimport { checkIfWalletIsConnected2 } from '../../../services/userData';\nimport { getApproval, setApproval, startSale, closeSale } from '../../../services/productData';\nimport './Aside.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Aside({\n  params,\n  history\n}) {\n  _s();\n\n  let owner = params.owner;\n  let onSale = params.onSale;\n  let givenPrice = params.price;\n  let contractAddress = params.contractAddress;\n  let ipfsHash = params.ipfsHash;\n  let tokenId = params.tokenId;\n  const [price, setPrice] = useState(0);\n  const [approved, setApproved] = useState(null);\n  const [userData, setUserData] = useState({\n    address: \"\",\n    isAuth: false,\n    isOwner: false\n  });\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    console.log(\"params inside useeffect:\", params);\n    if (params.length == 0) return;\n    checkIfWalletIsConnected2().then(res => {\n      console.log(\"res: \", res);\n\n      if (!params) {\n        setLoading(true);\n      } else {\n        setUserData({\n          address: res,\n          isAuth: res != null && res != \"\",\n          isOwner: res == owner,\n          onSale: onSale\n        });\n        setPrice(givenPrice);\n        if (res) setLoading(false);\n      }\n\n      if (res != \"\") {\n        console.log(\"here address: \", res);\n        getApproval(contractAddress, ipfsHash, res).then(res2 => {\n          console.log(\"approved: \", res2);\n          setApproved(res2);\n        }).catch(err => console.log(err));\n      }\n    }).catch(err => console.log(err));\n    console.log(\"aside se bhai2:\");\n  }, [params]);\n\n  const handlePriceChange = event => {\n    event.preventDefault();\n    setPrice(event.target.value);\n  };\n\n  const handleStartSale = event => {\n    event.preventDefault();\n    console.log(\"helllo\");\n    startSale(contractAddress, tokenId, price).then(res => {\n      console.log(\"post startSale: \", res);\n    }).catch(err => console.log(err));\n  };\n\n  const handleCloseSale = event => {\n    event.preventDefault();\n    console.log(\"helllo\");\n    closeSale(contractAddress, tokenId).then(res => {\n      console.log(\"post closeSale: \", res);\n    }).catch(err => console.log(err));\n  };\n\n  const handlePermChange = event => {\n    event.preventDefault();\n    console.log(\"helllo:\", approved);\n    setApproval(contractAddress, ipfsHash, !approved).then(res => {\n      console.log(\"post setApproved: \", res);\n    }).catch(err => console.log(err));\n  };\n\n  console.log(\"userData: \", userData);\n\n  const handleTodoButton = () => {};\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\" \", loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"border\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(\"aside\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-details-seller\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"priceLabel\",\n          className: \"col-lg-12\",\n          children: [\" \", userData.isAuth && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: \"#E7E6E6\"\n              },\n              children: \" Permission \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this), \" \", approved == null && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \" loading permissions... \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 53\n            }, this), \" \", approved == true && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \" Volaverse has permission to manage this asset for you.This is necessary if you want to buy / sell it via volaverse.Click here if you no longer want volaverse to have this permission \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 61\n            }, this), \" \", approved == false && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \" Volaverse needs permission to manage this asset for you.This is necessary if you want to buy / sell it via volaverse.Click here to grant volaverse this permission \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 70\n            }, this), approved == true && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"dark\",\n              className: \"col-lg-10\",\n              id: \"btnContact\",\n              onClick: handlePermChange,\n              children: \"Disallow \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 73\n            }, this), approved == false && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"dark\",\n              className: \"col-lg-10\",\n              id: \"btnContact\",\n              onClick: handlePermChange,\n              children: \"Allow \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 74\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 48\n          }, this), \" \", userData.onSale && /*#__PURE__*/_jsxDEV(\"h4\", {\n            id: \"product-price-heading\",\n            children: \" On Sale \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 68\n          }, this), \" \", !userData.onSale && /*#__PURE__*/_jsxDEV(\"h4\", {\n            id: \"product-price-heading\",\n            children: \" Not on Sale \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 73\n          }, this), \" \", \" \", userData.onSale && /*#__PURE__*/_jsxDEV(\"h1\", {\n            id: \"price-heading\",\n            children: [\" \", price, \"weth \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 76\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }, this), \" \", userData.isAuth ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\" \", !userData.isOwner && userData.onSale && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"dark\",\n            className: \"col-lg-10\",\n            id: \"btnContact\",\n            onClick: handleTodoButton,\n            children: \"Buy \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 73\n          }, this), \" \", userData.isOwner && userData.onSale && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"dark\",\n              className: \"col-lg-10\",\n              id: \"btnContact\",\n              onClick: handleCloseSale,\n              children: \"Remove Sale \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 77\n            }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"dark\",\n              className: \"col-lg-10\",\n              id: \"btnContact\",\n              onClick: handleTodoButton,\n              children: \"Update Sale \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 86\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 77\n          }, this), \" \", userData.isOwner && !userData.onSale && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"col-lg-12\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\" \", \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"price\",\n                    value: price,\n                    onChange: handlePriceChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 81\n                  }, this), \" weth \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 79\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 77\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 77\n            }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"dark\",\n              className: \"col-lg-10\",\n              id: \"btnContact\",\n              onClick: handleStartSale,\n              children: \"Start Sale \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 84\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 77\n          }, this), \" \"]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"guest-msg\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/auth/login\",\n            children: \" Sign In \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 90\n          }, this), \" now to buy the NFT\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 77\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }, this), \" \", \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 23\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 14\n  }, this);\n}\n\n_s(Aside, \"k/wbYx/2D4WTYwvXyU/3/G0VY4s=\");\n\n_c = Aside;\nexport default Aside;\n\nvar _c;\n\n$RefreshReg$(_c, \"Aside\");","map":{"version":3,"sources":["C:/Users/tarus/Documents/Marketplace-ReactJS-Project/client/src/components/Details/Aside/Aside.js"],"names":["useState","useContext","useEffect","Context","Button","Modal","Form","OverlayTrigger","Tooltip","Col","Spinner","Link","RiMessage3Fill","GrEdit","MdArchive","BsFillPersonFill","MdEmail","MdPhoneAndroid","FaSellsy","archiveSell","createChatRoom","checkIfWalletIsConnected2","getApproval","setApproval","startSale","closeSale","Aside","params","history","owner","onSale","givenPrice","price","contractAddress","ipfsHash","tokenId","setPrice","approved","setApproved","userData","setUserData","address","isAuth","isOwner","loading","setLoading","console","log","length","then","res","res2","catch","err","handlePriceChange","event","preventDefault","target","value","handleStartSale","handleCloseSale","handlePermChange","handleTodoButton","color"],"mappings":"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","sourcesContent":["import { useState, useContext, useEffect } from 'react';\r\nimport { Context } from '../../../ContextStore';\r\nimport { Button, Modal, Form, OverlayTrigger, Tooltip, Col, Spinner } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { RiMessage3Fill } from 'react-icons/ri';\r\nimport { GrEdit } from 'react-icons/gr';\r\nimport { MdArchive } from 'react-icons/md'\r\nimport { BsFillPersonFill } from 'react-icons/bs';\r\nimport { MdEmail, MdPhoneAndroid } from 'react-icons/md'\r\nimport { FaSellsy } from 'react-icons/fa'\r\nimport { archiveSell } from '../../../services/productData';\r\nimport { createChatRoom } from '../../../services/messagesData';\r\nimport { checkIfWalletIsConnected2 } from '../../../services/userData'\r\nimport { getApproval, setApproval, startSale, closeSale } from '../../../services/productData';\r\nimport './Aside.css';\r\n\r\n\r\nfunction Aside({ params, history }) {\r\n    let owner = params.owner;\r\n    let onSale = params.onSale;\r\n    let givenPrice = params.price;\r\n    let contractAddress = params.contractAddress;\r\n    let ipfsHash = params.ipfsHash;\r\n    let tokenId = params.tokenId;\r\n\r\n    const [price, setPrice] = useState(0);\r\n    const [approved, setApproved] = useState(null);\r\n    const [userData, setUserData] = useState({\r\n        address: \"\",\r\n        isAuth: false,\r\n        isOwner: false,\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        console.log(\"params inside useeffect:\", params);\r\n        if (params.length == 0) return;\r\n        checkIfWalletIsConnected2()\r\n            .then(res => {\r\n                console.log(\"res: \", res);\r\n                if (!params) {\r\n                    setLoading(true);\r\n                } else {\r\n                    setUserData({\r\n                        address: res,\r\n                        isAuth: res != null && res != \"\",\r\n                        isOwner: res == owner,\r\n                        onSale: onSale\r\n                    });\r\n                    setPrice(givenPrice);\r\n                    if (res) setLoading(false);\r\n                }\r\n                if (res != \"\") {\r\n                    console.log(\"here address: \", res);\r\n                    getApproval(contractAddress, ipfsHash, res)\r\n                        .then(res2 => {\r\n                            console.log(\"approved: \", res2);\r\n                            setApproved(res2);\r\n                        })\r\n                        .catch(err => console.log(err));\r\n                }\r\n\r\n            })\r\n            .catch(err => console.log(err));\r\n        console.log(\"aside se bhai2:\");\r\n\r\n    }, [params]);\r\n\r\n    const handlePriceChange = (event) => {\r\n        event.preventDefault();\r\n        setPrice(event.target.value);\r\n    }\r\n\r\n    const handleStartSale = (event) => {\r\n        event.preventDefault();\r\n        console.log(\"helllo\");\r\n        startSale(contractAddress, tokenId, price)\r\n            .then(res => {\r\n                console.log(\"post startSale: \", res);\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    const handleCloseSale = (event) => {\r\n        event.preventDefault();\r\n        console.log(\"helllo\");\r\n        closeSale(contractAddress, tokenId)\r\n            .then(res => {\r\n                console.log(\"post closeSale: \", res);\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n\r\n    const handlePermChange = (event) => {\r\n        event.preventDefault();\r\n        console.log(\"helllo:\", approved);\r\n        setApproval(contractAddress, ipfsHash, !approved)\r\n            .then(res => {\r\n                console.log(\"post setApproved: \", res);\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    console.log(\"userData: \", userData);\r\n\r\n    const handleTodoButton = () => {};\r\n\r\n    return ( <\r\n            div > {\r\n                loading ? ( < Spinner animation = \"border\" / > ) :\r\n                    ( < aside >\r\n                        <\r\n                        div className = \"product-details-seller\" >\r\n                        <\r\n                        div id = \"priceLabel\"\r\n                        className = \"col-lg-12\" > {\r\n                            userData.isAuth && < div >\r\n                            <\r\n                            h4 style = {\r\n                                { color: \"#E7E6E6\" } } > Permission < /h4> {\r\n                                approved == null && < p > loading permissions... < /p>} {\r\n                                        approved == true && < p > Volaverse has permission to manage this asset\r\n                                        for you.This is necessary\r\n                                        if you want to buy / sell it via volaverse.Click here\r\n                                        if you no longer want volaverse to have this permission < /p>} {\r\n                                                approved == false && < p > Volaverse needs permission to manage this asset\r\n                                                for you.This is necessary\r\n                                                if you want to buy / sell it via volaverse.Click here to grant volaverse this permission < /p>}\r\n\r\n                                                {\r\n                                                    approved == true && < Button variant = \"dark\"\r\n                                                    className = \"col-lg-10\"\r\n                                                    id = \"btnContact\"\r\n                                                    onClick = { handlePermChange } >\r\n                                                        Disallow <\r\n                                                        /Button>\r\n                                                }\r\n\r\n                                                {\r\n                                                    approved == false && < Button variant = \"dark\"\r\n                                                    className = \"col-lg-10\"\r\n                                                    id = \"btnContact\"\r\n                                                    onClick = { handlePermChange } >\r\n                                                        Allow <\r\n                                                        /Button>\r\n                                                } <\r\n                                                /div>\r\n                                            } {\r\n                                                userData.onSale && < h4 id = \"product-price-heading\" > On Sale < /h4>} {\r\n                                                    !userData.onSale && < h4 id = \"product-price-heading\" > Not on Sale < /h4>} {\r\n                                                        /* {userData.isOwner && userData.onSale &&\r\n                                                                                <>\r\n                                                                                    <OverlayTrigger placement=\"top\" overlay={<Tooltip>Edit the selling</Tooltip>}>\r\n                                                                                        <span id=\"edit-icon\">\r\n                                                                                            <Link to={`/categories/land/${params.tokenId}/edit`}><GrEdit /></Link>\r\n                                                                                        </span>\r\n                                                                                    </OverlayTrigger>\r\n                                                                                </>\r\n                                                                            } */\r\n                                                    } {\r\n                                                        userData.onSale && < h1 id = \"price-heading\" > { price }\r\n                                                        weth < /h1>} <\r\n                                                            /div> {\r\n                                                                userData.isAuth ? ( < > {!userData.isOwner && userData.onSale &&\r\n                                                                        <\r\n                                                                        Button variant = \"dark\"\r\n                                                                        className = \"col-lg-10\"\r\n                                                                        id = \"btnContact\"\r\n                                                                        onClick = { handleTodoButton } >\r\n                                                                        Buy <\r\n                                                                        /Button>\r\n                                                                    } {\r\n                                                                        userData.isOwner && userData.onSale &&\r\n                                                                            <\r\n                                                                            div >\r\n                                                                            <\r\n                                                                            Button variant = \"dark\"\r\n                                                                        className = \"col-lg-10\"\r\n                                                                        id = \"btnContact\"\r\n                                                                        onClick = { handleCloseSale } >\r\n                                                                            Remove Sale <\r\n                                                                            /Button> <\r\n                                                                            Button variant = \"dark\"\r\n                                                                        className = \"col-lg-10\"\r\n                                                                        id = \"btnContact\"\r\n                                                                        onClick = { handleTodoButton } >\r\n                                                                            Update Sale <\r\n                                                                            /Button> <\r\n                                                                            /div>\r\n                                                                    } {\r\n                                                                        userData.isOwner && !userData.onSale &&\r\n                                                                            <\r\n                                                                            div >\r\n                                                                            <\r\n                                                                            form className = \"col-lg-12\" >\r\n                                                                            <\r\n                                                                            label > {\r\n                                                                                /* {alertShow &&\r\n                                                                                                                <Alert variant=\"danger\" onClose={() => setAlertShow(false)} dismissible>\r\n                                                                                                                    <p>\r\n                                                                                                                        {error}\r\n                                                                                                                    </p>\r\n                                                                                                                </Alert>\r\n                                                                                                            } */\r\n                                                                            } <\r\n                                                                            p > < input type = \"text\"\r\n                                                                        name = \"price\"\r\n                                                                        value = { price }\r\n                                                                        onChange = { handlePriceChange }\r\n                                                                        required / > weth < /p> <\r\n                                                                            /label> <\r\n                                                                            /form> <\r\n                                                                            Button variant = \"dark\"\r\n                                                                        className = \"col-lg-10\"\r\n                                                                        id = \"btnContact\"\r\n                                                                        onClick = { handleStartSale } >\r\n                                                                            Start Sale <\r\n                                                                            /Button> <\r\n                                                                            /div>\r\n                                                                    } <\r\n                                                                    />) : ( <\r\n                                                                    p id = \"guest-msg\" > < Link to = \"/auth/login\" > Sign In < /Link> now to buy the NFT</p >\r\n                                                                )\r\n                                                            } <\r\n                                                            /div> {\r\n                                                                /* <Modal show={showMsg} onHide={handleClose}>\r\n                                                                                <Modal.Header closeButton>\r\n                                                                                    <Modal.Title>Message</Modal.Title>\r\n                                                                                </Modal.Header>\r\n                                                                                <Modal.Body>\r\n                                                                                    <Form>\r\n                                                                                        <Form.Group>\r\n                                                                                            <Form.Control as=\"textarea\" name=\"textarea\" onChange={handleMsgChange} rows={3} />\r\n                                                                                        </Form.Group>\r\n                                                                                    </Form>\r\n                                                                                </Modal.Body>\r\n                                                                                <Modal.Footer>\r\n                                                                                    <Button variant=\"dark\" onClick={onMsgSent}>Sent</Button>\r\n                                                                                    <Button variant=\"secondary\" onClick={handleClose}>Close</Button>\r\n                                                                                </Modal.Footer>\r\n                                                                            </Modal> */\r\n                                                            }\r\n\r\n                                                        {\r\n                                                            /* <Modal show={showArchive} onHide={handleCloseArchive}>\r\n                                                                            <Modal.Header closeButton>\r\n                                                                                <Modal.Title>Are you sure you want to archive this item?</Modal.Title>\r\n                                                                            </Modal.Header>\r\n                                                                            <Modal.Body>\r\n                                                                                <p>\r\n                                                                                    By clicking <strong>Archive</strong>, this sell will change\r\n                                                                                it's status to <strong>Archived</strong>,\r\n                                                                                which means that no one but you will be able see it.\r\n                                                                                You may want to change the status to <strong>Actived</strong> if you have\r\n                                                                                sold the item or you don't want to sell it anymore.\r\n                                                                                </p>\r\n\r\n                                                                                Don't worry, you can unarchive it at any time from Profile - Sells!\r\n                                                                            </Modal.Body>\r\n                                                                            <Modal.Footer>\r\n                                                                                <Button variant=\"secondary\" onClick={handleCloseArchive}>\r\n                                                                                    Close\r\n                                                                                </Button>\r\n                                                                                <Button variant=\"success\" onClick={handleSubmit}>\r\n                                                                                    Archive\r\n                                                                                </Button>\r\n                                                                            </Modal.Footer>\r\n                                                                        </Modal> */\r\n                                                        } <\r\n                                                        /aside>)} <\r\n                                                        /div>\r\n                                                    )\r\n                                                }\r\n\r\n                                                export default Aside;"]},"metadata":{},"sourceType":"module"}