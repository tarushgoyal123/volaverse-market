{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tarus\\\\Documents\\\\Marketplace-ReactJS-Project\\\\client\\\\src\\\\Pages\\\\EditProfile.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport ActiveSells from '../components/Profile/Sells/ActiveSells';\nimport { getUser, editUserProfile } from '../services/userData';\nimport { Col, Row, Button, OverlayTrigger, Tooltip, Spinner, Alert } from 'react-bootstrap';\nimport { BsFillPersonFill } from 'react-icons/bs';\nimport { MdEmail, MdPhoneAndroid } from 'react-icons/md';\nimport { TiTick } from 'react-icons/ti';\nimport { AiFillCloseSquare } from 'react-icons/ai';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction EditProfile({\n  history\n}) {\n  _s();\n\n  const [user, setUser] = useState({\n    name: \"\",\n    phoneNumber: \"\",\n    email: \"\",\n    avatar: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [alertShow, setAlertShow] = useState(false);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    getUser().then(res => setUser(res.user)).catch(err => console.log(err));\n  }, [setUser]);\n\n  const handleDiscard = () => {\n    history.push(`/profile/${user._id}`);\n  };\n\n  const handleChanges = e => {\n    e.preventDefault();\n    setUser({ ...user,\n      [e.target.name]: e.target.value\n    });\n\n    if (e.target.files) {\n      setUser({ ...user,\n        avatar: e.target.files[0]\n      });\n    }\n  };\n\n  const handleSave = e => {\n    //TODO: Rewrite this \n    e.preventDefault();\n    let {\n      _id,\n      name,\n      phoneNumber,\n      email,\n      avatar\n    } = user;\n    let obj = {\n      name,\n      phoneNumber,\n      email\n    };\n    setLoading(true);\n\n    if (typeof avatar == 'object') {\n      getBase64(avatar).then(data => {\n        obj['avatar'] = data;\n        editUserProfile(_id, obj).then(res => {\n          if (!res.error) {\n            history.push(`/profile/${_id}`);\n          } else {\n            setLoading(false);\n            setError(res.error);\n            setAlertShow(true);\n          }\n        }).catch(err => console.error('edit profile err: ', err));\n      }).catch(err => console.log('base64 error: ', err));\n    } else {\n      editUserProfile(_id, obj).then(res => {\n        if (!res.error) {\n          history.push(`/profile/${_id}`);\n        } else {\n          setLoading(false);\n          setError(res.error);\n          setAlertShow(true);\n        }\n      }).catch(err => console.error('edit profile err: ', err));\n    }\n  };\n\n  function getBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = () => resolve(reader.result);\n\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"profile-head\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"col-lg-12\",\n          children: [alertShow && /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"danger\",\n            onClose: () => setAlertShow(false),\n            dismissible: true,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"profile-row\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: 3,\n              md: 5,\n              sm: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"file-upload\",\n                className: \"custom-file-upload\",\n                children: /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n                  placement: \"bottom\",\n                  overlay: /*#__PURE__*/_jsxDEV(Tooltip, {\n                    children: \"Click to select a photo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 50\n                  }, this),\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    id: \"avatar\",\n                    src: user.avatar,\n                    alt: \"user-avatar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"file-upload\",\n                type: \"file\",\n                name: \"avatar\",\n                onChangeCapture: handleChanges\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: 4,\n              md: 3,\n              sm: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(BsFillPersonFill, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 36\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"name\",\n                  value: user.name,\n                  onChange: handleChanges,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 57\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(MdEmail, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 36\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"email\",\n                  name: \"email\",\n                  value: user.email,\n                  onChange: handleChanges,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 48\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(MdPhoneAndroid, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 36\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"phoneNumber\",\n                  value: user.phoneNumber,\n                  onChange: handleChanges,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 55\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: 2,\n              id: \"edit-profile-icons\",\n              children: loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n                animation: \"border\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(OverlayTrigger, {\n                  placement: \"bottom\",\n                  overlay: /*#__PURE__*/_jsxDEV(Tooltip, {\n                    children: \" Save changes\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 58\n                  }, this),\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    onClick: handleSave,\n                    children: /*#__PURE__*/_jsxDEV(TiTick, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 119,\n                      columnNumber: 76\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n                  placement: \"bottom\",\n                  overlay: /*#__PURE__*/_jsxDEV(Tooltip, {\n                    children: \"Discard changes \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 58\n                  }, this),\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    onClick: handleDiscard,\n                    children: /*#__PURE__*/_jsxDEV(AiFillCloseSquare, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 79\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: 2,\n          sm: 12,\n          id: \"aside\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            disabled: true,\n            variant: \"dark\",\n            id: \"active-sells\",\n            children: \"Active Sells\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n            disabled: true,\n            variant: \"dark\",\n            id: \"archived-sells\",\n            children: \"Archived\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n            disabled: true,\n            variant: \"dark\",\n            id: \"wishlist\",\n            children: \"Wishlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this), ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: 10,\n          sm: 12,\n          disabled: true,\n          children: /*#__PURE__*/_jsxDEV(ActiveSells, {\n            params: user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(EditProfile, \"w5xsDutjVAjTQHblLpytD1xTimU=\");\n\n_c = EditProfile;\nexport default EditProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfile\");","map":{"version":3,"sources":["C:/Users/tarus/Documents/Marketplace-ReactJS-Project/client/src/Pages/EditProfile.js"],"names":["useEffect","useState","ActiveSells","getUser","editUserProfile","Col","Row","Button","OverlayTrigger","Tooltip","Spinner","Alert","BsFillPersonFill","MdEmail","MdPhoneAndroid","TiTick","AiFillCloseSquare","EditProfile","history","user","setUser","name","phoneNumber","email","avatar","loading","setLoading","error","setError","alertShow","setAlertShow","window","scrollTo","then","res","catch","err","console","log","handleDiscard","push","_id","handleChanges","e","preventDefault","target","value","files","handleSave","obj","getBase64","data","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport ActiveSells from '../components/Profile/Sells/ActiveSells';\r\nimport { getUser, editUserProfile } from '../services/userData';\r\nimport { Col, Row, Button, OverlayTrigger, Tooltip, Spinner, Alert } from 'react-bootstrap';\r\nimport { BsFillPersonFill } from 'react-icons/bs';\r\nimport { MdEmail, MdPhoneAndroid } from 'react-icons/md'\r\nimport { TiTick } from 'react-icons/ti'\r\nimport { AiFillCloseSquare } from 'react-icons/ai'\r\n\r\nfunction EditProfile({ history }) {\r\n    const [user, setUser] = useState({ name: \"\", phoneNumber: \"\", email: \"\", avatar: \"\" });\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(false);\r\n    const [alertShow, setAlertShow] = useState(false);\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n        getUser()\r\n            .then(res => setUser(res.user))\r\n            .catch(err => console.log(err))\r\n    }, [setUser])\r\n\r\n    const handleDiscard = () => { history.push(`/profile/${user._id}`) }\r\n    const handleChanges = (e) => {\r\n        e.preventDefault();\r\n        setUser({ ...user, [e.target.name]: e.target.value });\r\n        if (e.target.files) {\r\n            setUser({ ...user, avatar: e.target.files[0] })\r\n        }\r\n    }\r\n\r\n    const handleSave = (e) => {\r\n        //TODO: Rewrite this \r\n        e.preventDefault();\r\n        let { _id, name, phoneNumber, email, avatar } = user;\r\n        let obj = { name, phoneNumber, email }\r\n        setLoading(true);\r\n        if (typeof avatar == 'object') {\r\n            getBase64(avatar)\r\n                .then((data) => {\r\n                    obj['avatar'] = data;\r\n                    editUserProfile(_id, obj)\r\n                        .then(res => {\r\n                            if (!res.error) {\r\n                                history.push(`/profile/${_id}`);\r\n                            } else {\r\n                                setLoading(false);\r\n                                setError(res.error);\r\n                                setAlertShow(true);\r\n                            }\r\n                        })\r\n                        .catch(err => console.error('edit profile err: ', err))\r\n                })\r\n                .catch(err => console.log('base64 error: ', err));\r\n        } else {\r\n            editUserProfile(_id, obj)\r\n                .then(res => {\r\n                    if (!res.error) {\r\n                        history.push(`/profile/${_id}`);\r\n                    } else {\r\n                        setLoading(false);\r\n                        setError(res.error);\r\n                        setAlertShow(true);\r\n                    }\r\n                })\r\n                .catch(err => console.error('edit profile err: ', err))\r\n        }\r\n    }\r\n\r\n    function getBase64(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div id=\"profile-head\">\r\n                <div className=\"container\">\r\n                    <form className=\"col-lg-12\">\r\n                        {alertShow &&\r\n                            <Alert variant=\"danger\" onClose={() => setAlertShow(false)} dismissible>\r\n                                <p>\r\n                                    {error}\r\n                                </p>\r\n                            </Alert>\r\n                        }\r\n                        <Row className=\"profile-row\">\r\n                            <Col lg={3} md={5} sm={12}>\r\n                                <label htmlFor=\"file-upload\" className=\"custom-file-upload\">\r\n                                    <OverlayTrigger placement=\"bottom\"\r\n                                        overlay={<Tooltip>Click to select a photo</Tooltip>}\r\n                                    >\r\n                                        <img id=\"avatar\" src={user.avatar} alt=\"user-avatar\"/>\r\n                                    </OverlayTrigger>\r\n                                </label>\r\n                                <input id=\"file-upload\" type=\"file\" name=\"avatar\" onChangeCapture={handleChanges} />\r\n                            </Col>\r\n                            <Col lg={4} md={3} sm={12}>\r\n                                <p><BsFillPersonFill /> <input type=\"text\" name=\"name\" value={user.name} onChange={handleChanges} required /></p>\r\n                                <p><MdEmail /> <input type=\"email\" name=\"email\" value={user.email} onChange={handleChanges} required /></p>\r\n                                <p><MdPhoneAndroid /> <input type=\"text\" name=\"phoneNumber\" value={user.phoneNumber} onChange={handleChanges} required /></p>\r\n                                {/* TODO user password changes:\r\n                                <p><RiLockPasswordFill /> <input type=\"password\" name=\"oldPassword\" placeholder=\"Old password\" onChange={handleChanges} required /></p>\r\n                                <p><RiLockPasswordFill /> <input type=\"password\" name=\"newPassword\" placeholder=\"New password\" onChange={handleChanges} required /></p>\r\n                                <p><RiLockPasswordFill /> <input type=\"password\" name=\"repNewPassword\" placeholder=\"Repeat new password\" onChange={handleChanges} required /></p> */}\r\n                            </Col>\r\n                            <Col lg={2} id=\"edit-profile-icons\">\r\n                                {loading ? (\r\n                                    <Spinner animation=\"border\" />\r\n                                ) : (\r\n                                        <>\r\n                                            <OverlayTrigger placement=\"bottom\"\r\n                                                overlay={<Tooltip> Save changes</Tooltip>}\r\n                                            >\r\n                                                <span onClick={handleSave}><TiTick /></span>\r\n                                            </OverlayTrigger>\r\n                                            <OverlayTrigger placement=\"bottom\"\r\n                                                overlay={<Tooltip>Discard changes </Tooltip>}\r\n                                            >\r\n                                                <span onClick={handleDiscard}><AiFillCloseSquare /></span>\r\n                                            </OverlayTrigger>\r\n                                        </>\r\n                                    )}\r\n\r\n                            </Col>\r\n                        </Row>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div className=\"container\">\r\n                <Row>\r\n                    <Col lg={2} sm={12} id=\"aside\">\r\n                        <Button disabled variant=\"dark\" id=\"active-sells\">Active Sells</Button>{' '}\r\n                        <Button disabled variant=\"dark\" id=\"archived-sells\">Archived</Button>{' '}\r\n                        <Button disabled variant=\"dark\" id=\"wishlist\">Wishlist</Button>{' '}\r\n                    </Col>\r\n                    <Col lg={10} sm={12} disabled>\r\n                        <ActiveSells params={user}/>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default EditProfile;"]},"metadata":{},"sourceType":"module"}