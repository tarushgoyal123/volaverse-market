{"ast":null,"code":"import Web3 from 'web3';\nconst nftManagerAbi = `[\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"contractAddress\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"tokenId\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"closeSale\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"contractAddress\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"category\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"num\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"ipfsHash\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"establish\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"contractAddress\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"tokenId\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"purchase\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"payable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"price\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"contractAddress\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"tokenId\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"startSale\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"constructor\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"contractAddress\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"tokenId\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"getInfo\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"components\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\t\t\"name\": \"owner\",\n\t\t\t\t\t\t\"type\": \"address\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\t\t\"name\": \"onSale\",\n\t\t\t\t\t\t\"type\": \"bool\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\t\t\"name\": \"price\",\n\t\t\t\t\t\t\"type\": \"uint256\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\t\t\"name\": \"category\",\n\t\t\t\t\t\t\"type\": \"uint256\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\t\t\"name\": \"tokenId\",\n\t\t\t\t\t\t\"type\": \"uint256\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\t\t\"name\": \"contractAddress\",\n\t\t\t\t\t\t\"type\": \"address\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\t\t\"name\": \"ipfsHash\",\n\t\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t\"internalType\": \"struct NftManager.Detail\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"tuple\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"category\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"getNFTs\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"components\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\t\t\"name\": \"owner\",\n\t\t\t\t\t\t\"type\": \"address\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\t\t\"name\": \"onSale\",\n\t\t\t\t\t\t\"type\": \"bool\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\t\t\"name\": \"price\",\n\t\t\t\t\t\t\"type\": \"uint256\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\t\t\"name\": \"category\",\n\t\t\t\t\t\t\"type\": \"uint256\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\t\t\"name\": \"tokenId\",\n\t\t\t\t\t\t\"type\": \"uint256\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\t\t\"name\": \"contractAddress\",\n\t\t\t\t\t\t\"type\": \"address\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\t\t\"name\": \"ipfsHash\",\n\t\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t\"internalType\": \"struct NftManager.Detail[]\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"tuple[]\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"nfts\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"owner\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\"name\": \"onSale\",\n\t\t\t\t\"type\": \"bool\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"price\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\"name\": \"valid\",\n\t\t\t\t\"type\": \"bool\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [],\n\t\t\"name\": \"testforWorking\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t}\n]\n`;\nconst nftManagerContractAddress = \"0xe248F26e92dbE612174aC3C5d6c3bB705Ef215bc\";\nexport async function getApproval(contractAddress, ipfsHash, public_key) {\n  const web3 = new Web3(window.ethereum);\n\n  if (typeof web3 !== 'undefined') {\n    console.log(\"getApproval |\", contractAddress, ipfsHash, public_key);\n    var nftContractAbi = await fetch(\"https://ipfs.io/ipfs/\" + ipfsHash).then(response => {\n      console.log(response);\n      return response.json();\n    }).then(responseJson => {\n      return responseJson.output.abi;\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n    console.log(\"getApproval | nftContractAbi:\", nftContractAbi);\n    var myContract = new web3.eth.Contract(nftContractAbi, contractAddress);\n    const response = await myContract.methods.isApprovedForAll(public_key, nftManagerContractAddress).call({\n      from: window.web3.currentProvider.selectedAddress\n    });\n    console.log(\"getApproval | result:\", response);\n    return response;\n  } else {\n    console.log(\"web3 not defined\");\n  }\n}\nexport async function setApproval(contractAddress, ipfsHash, perm) {\n  const web3 = new Web3(window.ethereum);\n  console.log(\"heyyyyyyyyyyyyyyyyy\");\n\n  if (typeof web3 !== 'undefined') {\n    console.log(\"heyyyyyyyyyyyyyyyyy\");\n    var nftContractAbi = await fetch(\"https://ipfs.io/ipfs/\" + ipfsHash).then(response => response.json()).then(responseJson => {\n      return responseJson.output.abi;\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n    console.log(\"setApproval | nftContractAbi:\", nftContractAbi);\n    var myContract = new web3.eth.Contract(nftContractAbi, contractAddress);\n    console.log(\"setApproval | perm:\", perm);\n    var response = await myContract.methods.setApprovalForAll(nftManagerContractAddress, perm).send({\n      from: window.web3.currentProvider.selectedAddress,\n      to: contractAddress\n    });\n    console.log(\"setApproval | response:\", response);\n    return response;\n  } else {\n    console.log(\"web3 not defined\");\n  }\n}\nexport async function getMarketNfts(category) {\n  if (!category) return [];\n  const web3 = new Web3(window.ethereum);\n\n  if (typeof web3 !== 'undefined') {\n    var abi = JSON.parse(nftManagerAbi);\n    var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\n    console.log(\"getMarketNfts called\");\n    var category_type;\n    if (category == \"land\") category_type = 0;else if (category == \"wearable\") category_type = 1;else if (category == \"decoration\") category_type = 2;else {\n      console.log(\"category \", category, \" not known!\");\n      return [];\n    }\n    const response = await myContract.methods.getNFTs(category_type).call({\n      from: window.web3.currentProvider.selectedAddress\n    });\n    const result = [];\n    console.log(\"getMarketNfts recieved result:\", response);\n\n    for (let i = 0; i < response.length; i++) {\n      if (response[i][1]) {\n        result.push({\n          price: response[i][2],\n          onSale: response[i][1],\n          owner: response[i][0].toLowerCase(),\n          contractAddress: response[i][5],\n          tokenId: response[i][4],\n          category: category\n        });\n      }\n    }\n\n    return result;\n  } else {\n    console.log(\"web3 not defined\");\n    return [];\n  }\n}\nexport async function getUserNfts(public_key, category) {\n  const web3 = new Web3(window.ethereum);\n\n  if (typeof web3 !== 'undefined') {\n    var abi = JSON.parse(nftManagerAbi);\n    var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\n    console.log(\"getUserNfts called\");\n    var category_type;\n    if (category == \"land\") category_type = 0;else if (category == \"wearable\") category_type = 1;else if (category == \"decoration\") category_type = 2;else {\n      console.log(\"category \", category, \" not known!\");\n      return;\n    }\n    const response = await myContract.methods.getNFTs(category_type).call({\n      from: window.web3.currentProvider.selectedAddress\n    });\n    console.log(\"getUserNfts recieved result:\", response);\n    const result = [];\n\n    for (let i = 0; i < response.length; i++) {\n      if (response[i][0].toLowerCase() == public_key) {\n        result.push({\n          price: response[i][2],\n          onSale: response[i][1],\n          owner: response[i][0].toLowerCase(),\n          contractAddress: response[i][5],\n          tokenId: response[i][4],\n          category: category\n        });\n      }\n    }\n\n    console.log(\"result:\", result);\n    return result;\n  } else {\n    console.log(\"web3 not defined\");\n  }\n}\nexport async function getSpecific(contractAddress, id) {\n  const web3 = new Web3(window.ethereum);\n\n  if (typeof web3 !== 'undefined') {\n    var abi = JSON.parse(nftManagerAbi);\n    var myContract2 = new web3.eth.Contract(abi, nftManagerContractAddress);\n    const response2 = await myContract2.methods.getInfo(contractAddress, id).call({\n      from: window.web3.currentProvider.selectedAddress\n    });\n    var category_type = response2[3];\n    var category;\n    if (category_type == 0) category = \"land\";else if (category_type == 1) category = \"wearable\";else if (category_type == 2) category = \"decoration\";else category = \"fuck\";\n    console.log(\"getSpecific recieved result for getNFTs:\", response2);\n    const result = {\n      // name: response[0],\n      // category: response[1],\n      // description: response[2],\n      price: response2[2],\n      onSale: response2[1],\n      owner: response2[0].toLowerCase(),\n      contractAddress: response2[5],\n      tokenId: response2[4],\n      category: category,\n      ipfsHash: response2[6]\n    };\n    console.log(\"result:\", result);\n    return result;\n    console.log(\"getSpecific | fetching abi\");\n    var nftContractAbi = await fetch(\"https://ipfs.io/ipfs/QmZXbYk8QeGiT8Tzw8ESygbRVv4Xg1nynciTYzv3DJ1agD\").then(response => response.json()).then(responseJson => {\n      return responseJson.output.abi;\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n    console.log(\"nftContractAbi:\", nftContractAbi); // var abi = JSON.parse(nftManagerAbi);\n\n    var myContract = new web3.eth.Contract(nftContractAbi, contractAddress);\n    const response = await myContract.methods.getMetaData().call({\n      from: window.web3.currentProvider.selectedAddress\n    });\n    console.log(\"getSpecific recieved result for getMetaData:\", response);\n\n    for (let i = 0; i < response2.length; i++) {\n      console.log(response2[i][5].toLowerCase(), contractAddress.toLowerCase(), response2[i][4], id);\n\n      if (response2[i][5].toLowerCase() == contractAddress.toLowerCase() && response2[i][4] == id) {\n        const result = {\n          name: response[0],\n          category: response[1],\n          description: response[2],\n          price: response2[i][2],\n          onSale: response2[i][1],\n          owner: response2[i][0].toLowerCase(),\n          contractAddress: response2[i][5],\n          tokenId: response2[i][4],\n          category: category\n        };\n        console.log(\"result:\", result);\n        return result;\n      }\n    }\n\n    console.log(\"Not Found specific!!!\");\n    return;\n  } else {\n    console.log(\"web3 not defined\");\n  }\n}\nexport async function getSpecific2(contractAddress, id) {\n  const web3 = new Web3(window.ethereum);\n\n  if (typeof web3 !== 'undefined') {\n    var abi = JSON.parse(nftManagerAbi);\n    var myContract2 = new web3.eth.Contract(abi, nftManagerContractAddress);\n    const response2 = await myContract2.methods.getInfo(contractAddress, id).call({\n      from: window.web3.currentProvider.selectedAddress\n    });\n    var category_type = response2[3];\n    var category;\n    if (category_type == 0) category = \"land\";else if (category_type == 1) category = \"wearable\";else if (category_type == 2) category = \"decoration\";else category = \"fuck\";\n    console.log(\"getSpecific recieved result for getNFTs:\", response2);\n    const result = {\n      // name: response[0],\n      // category: response[1],\n      // description: response[2],\n      price: response2[2],\n      onSale: response2[1],\n      owner: response2[0].toLowerCase(),\n      contractAddress: response2[5],\n      tokenId: response2[4],\n      category: category,\n      ipfsHash: response2[6]\n    };\n    console.log(\"result:\", result);\n    return result;\n  } else {\n    console.log(\"web3 not defined\");\n  }\n}\nexport async function startSale(contractAddress, tokenId, price) {\n  const web3 = new Web3(window.ethereum);\n\n  if (typeof web3 !== 'undefined') {\n    var abi = JSON.parse(nftManagerAbi);\n    var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\n    var response = await myContract.methods.startSale(price, contractAddress, tokenId).send({\n      from: window.web3.currentProvider.selectedAddress,\n      to: nftManagerContractAddress\n    });\n    console.log(\"startSale | response:\", response);\n    return response;\n  } else {\n    console.log(\"web3 not defined\");\n  }\n}\nexport async function closeSale(contractAddress, tokenId, price) {\n  const web3 = new Web3(window.ethereum);\n\n  if (typeof web3 !== 'undefined') {\n    var abi = JSON.parse(nftManagerAbi);\n    var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\n    var response = await myContract.methods.closeSale(contractAddress, tokenId).send({\n      from: window.web3.currentProvider.selectedAddress,\n      to: nftManagerContractAddress\n    });\n    console.log(\"closeSale | response:\", response);\n    return response;\n  } else {\n    console.log(\"web3 not defined\");\n  }\n}\nexport async function buyProduct(contractAddress, tokenId, price) {\n  const web3 = new Web3(window.ethereum);\n\n  if (typeof web3 !== 'undefined') {\n    var abi = JSON.parse(nftManagerAbi);\n    var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\n    var response = await myContract.methods.purchase(contractAddress, tokenId).send({\n      from: window.web3.currentProvider.selectedAddress,\n      to: nftManagerContractAddress,\n      price: price\n    });\n    console.log(\"closeSale | response:\", response);\n    return response;\n  } else {\n    console.log(\"web3 not defined\");\n  }\n}","map":{"version":3,"sources":["C:/Users/tarus/Documents/Marketplace-ReactJS-Project/client/src/services/productData.js"],"names":["Web3","nftManagerAbi","nftManagerContractAddress","getApproval","contractAddress","ipfsHash","public_key","web3","window","ethereum","console","log","nftContractAbi","fetch","then","response","json","responseJson","output","abi","catch","error","myContract","eth","Contract","methods","isApprovedForAll","call","from","currentProvider","selectedAddress","setApproval","perm","setApprovalForAll","send","to","getMarketNfts","category","JSON","parse","category_type","getNFTs","result","i","length","push","price","onSale","owner","toLowerCase","tokenId","getUserNfts","getSpecific","id","myContract2","response2","getInfo","getMetaData","name","description","getSpecific2","startSale","closeSale","buyProduct","purchase"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AAEA,MAAMC,aAAa,GAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","sourcesContent":["import Web3 from 'web3';\r\n\r\nconst nftManagerAbi = `[\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"contractAddress\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"tokenId\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"closeSale\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"contractAddress\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"category\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"num\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"ipfsHash\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"establish\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"contractAddress\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"tokenId\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"purchase\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"payable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"price\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"contractAddress\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"tokenId\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"startSale\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"constructor\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"contractAddress\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"tokenId\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"getInfo\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"components\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\t\t\"name\": \"owner\",\r\n\t\t\t\t\t\t\"type\": \"address\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\t\t\"name\": \"onSale\",\r\n\t\t\t\t\t\t\"type\": \"bool\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\t\t\"name\": \"price\",\r\n\t\t\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\t\t\"name\": \"category\",\r\n\t\t\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\t\t\"name\": \"tokenId\",\r\n\t\t\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\t\t\"name\": \"contractAddress\",\r\n\t\t\t\t\t\t\"type\": \"address\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\t\t\"name\": \"ipfsHash\",\r\n\t\t\t\t\t\t\"type\": \"string\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"internalType\": \"struct NftManager.Detail\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"tuple\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"category\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"getNFTs\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"components\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\t\t\"name\": \"owner\",\r\n\t\t\t\t\t\t\"type\": \"address\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\t\t\"name\": \"onSale\",\r\n\t\t\t\t\t\t\"type\": \"bool\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\t\t\"name\": \"price\",\r\n\t\t\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\t\t\"name\": \"category\",\r\n\t\t\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\t\t\"name\": \"tokenId\",\r\n\t\t\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\t\t\"name\": \"contractAddress\",\r\n\t\t\t\t\t\t\"type\": \"address\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\t\t\"name\": \"ipfsHash\",\r\n\t\t\t\t\t\t\"type\": \"string\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t\"internalType\": \"struct NftManager.Detail[]\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"tuple[]\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"nfts\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"owner\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"onSale\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"price\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"valid\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"testforWorking\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t}\r\n]\r\n`;\r\nconst nftManagerContractAddress = \"0xe248F26e92dbE612174aC3C5d6c3bB705Ef215bc\";\r\n\r\nexport async function getApproval(contractAddress, ipfsHash, public_key) {\r\n    const web3 = new Web3(window.ethereum);\r\n    if (typeof web3 !== 'undefined') {\r\n        console.log(\"getApproval |\", contractAddress, ipfsHash, public_key);\r\n        var nftContractAbi = await fetch(\"https://ipfs.io/ipfs/\" + ipfsHash)\r\n            .then((response) => { console.log(response); return response.json(); })\r\n            .then((responseJson) => {\r\n                return responseJson.output.abi;\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error:', error);\r\n            })\r\n        console.log(\"getApproval | nftContractAbi:\", nftContractAbi);\r\n\r\n        var myContract = new web3.eth.Contract(nftContractAbi, contractAddress);\r\n        const response = await myContract.methods.isApprovedForAll(public_key, nftManagerContractAddress)\r\n            .call({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n            });\r\n        console.log(\"getApproval | result:\", response);\r\n        return response;\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n    }\r\n}\r\n\r\nexport async function setApproval(contractAddress, ipfsHash, perm) {\r\n    const web3 = new Web3(window.ethereum);\r\n    console.log(\"heyyyyyyyyyyyyyyyyy\");\r\n    if (typeof web3 !== 'undefined') {\r\n        console.log(\"heyyyyyyyyyyyyyyyyy\");\r\n        var nftContractAbi = await fetch(\"https://ipfs.io/ipfs/\" + ipfsHash)\r\n            .then((response) => response.json())\r\n            .then((responseJson) => {\r\n                return responseJson.output.abi;\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error:', error);\r\n            })\r\n        console.log(\"setApproval | nftContractAbi:\", nftContractAbi);\r\n\r\n        var myContract = new web3.eth.Contract(nftContractAbi, contractAddress);\r\n\r\n        console.log(\"setApproval | perm:\", perm);\r\n        var response = await myContract.methods\r\n            .setApprovalForAll(nftManagerContractAddress, perm)\r\n            .send({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n                to: contractAddress,\r\n            });\r\n        console.log(\"setApproval | response:\", response);\r\n        return response;\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n    }\r\n}\r\n\r\nexport async function getMarketNfts(category) {\r\n    if (!category) return [];\r\n    const web3 = new Web3(window.ethereum);\r\n    if (typeof web3 !== 'undefined') {\r\n        var abi = JSON.parse(nftManagerAbi);\r\n        var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\r\n        console.log(\"getMarketNfts called\");\r\n        var category_type;\r\n        if (category == \"land\") category_type = 0;\r\n        else if (category == \"wearable\") category_type = 1;\r\n        else if (category == \"decoration\") category_type = 2;\r\n        else {\r\n            console.log(\"category \", category, \" not known!\");\r\n            return [];\r\n        }\r\n        const response = await myContract.methods.getNFTs(category_type)\r\n            .call({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n            });\r\n        const result = [];\r\n        console.log(\"getMarketNfts recieved result:\", response);\r\n        for (let i = 0; i < response.length; i++) {\r\n            if (response[i][1]) {\r\n                result.push({\r\n                    price: response[i][2],\r\n                    onSale: response[i][1],\r\n                    owner: response[i][0].toLowerCase(),\r\n                    contractAddress: response[i][5],\r\n                    tokenId: response[i][4],\r\n                    category: category\r\n                })\r\n            }\r\n        }\r\n        return result;\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getUserNfts(public_key, category) {\r\n    const web3 = new Web3(window.ethereum);\r\n    if (typeof web3 !== 'undefined') {\r\n        var abi = JSON.parse(nftManagerAbi);\r\n        var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\r\n        console.log(\"getUserNfts called\");\r\n        var category_type;\r\n        if (category == \"land\") category_type = 0;\r\n        else if (category == \"wearable\") category_type = 1;\r\n        else if (category == \"decoration\") category_type = 2;\r\n        else {\r\n            console.log(\"category \", category, \" not known!\");\r\n            return;\r\n        }\r\n        const response = await myContract.methods.getNFTs(category_type)\r\n            .call({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n            });\r\n        console.log(\"getUserNfts recieved result:\", response);\r\n        const result = [];\r\n        for (let i = 0; i < response.length; i++) {\r\n            if (response[i][0].toLowerCase() == public_key) {\r\n                result.push({\r\n                    price: response[i][2],\r\n                    onSale: response[i][1],\r\n                    owner: response[i][0].toLowerCase(),\r\n                    contractAddress: response[i][5],\r\n                    tokenId: response[i][4],\r\n                    category: category\r\n                })\r\n            }\r\n        }\r\n        console.log(\"result:\", result);\r\n        return result;\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n    }\r\n}\r\n\r\nexport async function getSpecific(contractAddress, id) {\r\n    const web3 = new Web3(window.ethereum);\r\n    if (typeof web3 !== 'undefined') {\r\n        var abi = JSON.parse(nftManagerAbi);\r\n        var myContract2 = new web3.eth.Contract(abi, nftManagerContractAddress);\r\n        const response2 = await myContract2.methods.getInfo(contractAddress, id)\r\n            .call({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n            });\r\n        var category_type = response2[3];\r\n        var category;\r\n        if (category_type == 0) category = \"land\";\r\n        else if (category_type == 1) category = \"wearable\";\r\n        else if (category_type == 2) category = \"decoration\";\r\n        else category = \"fuck\";\r\n        console.log(\"getSpecific recieved result for getNFTs:\", response2);\r\n        const result = {\r\n            // name: response[0],\r\n            // category: response[1],\r\n            // description: response[2],\r\n            price: response2[2],\r\n            onSale: response2[1],\r\n            owner: response2[0].toLowerCase(),\r\n            contractAddress: response2[5],\r\n            tokenId: response2[4],\r\n            category: category,\r\n            ipfsHash: response2[6]\r\n        }\r\n        console.log(\"result:\", result);\r\n        return result;\r\n\r\n        console.log(\"getSpecific | fetching abi\");\r\n        var nftContractAbi = await fetch(\"https://ipfs.io/ipfs/QmZXbYk8QeGiT8Tzw8ESygbRVv4Xg1nynciTYzv3DJ1agD\")\r\n            .then((response) => response.json())\r\n            .then((responseJson) => {\r\n                return responseJson.output.abi;\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error:', error);\r\n            })\r\n        console.log(\"nftContractAbi:\", nftContractAbi);\r\n        // var abi = JSON.parse(nftManagerAbi);\r\n        var myContract = new web3.eth.Contract(nftContractAbi, contractAddress);\r\n        const response = await myContract.methods.getMetaData()\r\n            .call({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n            });\r\n        console.log(\"getSpecific recieved result for getMetaData:\", response);\r\n\r\n        for (let i = 0; i < response2.length; i++) {\r\n            console.log(response2[i][5].toLowerCase(), contractAddress.toLowerCase(), response2[i][4], id);\r\n            if (response2[i][5].toLowerCase() == contractAddress.toLowerCase() && response2[i][4] == id) {\r\n                const result = {\r\n                    name: response[0],\r\n                    category: response[1],\r\n                    description: response[2],\r\n                    price: response2[i][2],\r\n                    onSale: response2[i][1],\r\n                    owner: response2[i][0].toLowerCase(),\r\n                    contractAddress: response2[i][5],\r\n                    tokenId: response2[i][4],\r\n                    category: category\r\n                }\r\n                console.log(\"result:\", result);\r\n                return result;\r\n            }\r\n        }\r\n        console.log(\"Not Found specific!!!\");\r\n        return;\r\n\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n    }\r\n}\r\n\r\nexport async function getSpecific2(contractAddress, id) {\r\n    const web3 = new Web3(window.ethereum);\r\n    if (typeof web3 !== 'undefined') {\r\n        var abi = JSON.parse(nftManagerAbi);\r\n        var myContract2 = new web3.eth.Contract(abi, nftManagerContractAddress);\r\n        const response2 = await myContract2.methods.getInfo(contractAddress, id)\r\n            .call({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n            });\r\n        var category_type = response2[3];\r\n        var category;\r\n        if (category_type == 0) category = \"land\";\r\n        else if (category_type == 1) category = \"wearable\";\r\n        else if (category_type == 2) category = \"decoration\";\r\n        else category = \"fuck\";\r\n        console.log(\"getSpecific recieved result for getNFTs:\", response2);\r\n        const result = {\r\n            // name: response[0],\r\n            // category: response[1],\r\n            // description: response[2],\r\n            price: response2[2],\r\n            onSale: response2[1],\r\n            owner: response2[0].toLowerCase(),\r\n            contractAddress: response2[5],\r\n            tokenId: response2[4],\r\n            category: category,\r\n            ipfsHash: response2[6]\r\n        }\r\n        console.log(\"result:\", result);\r\n        return result;\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n    }\r\n}\r\n\r\nexport async function startSale(contractAddress, tokenId, price) {\r\n    const web3 = new Web3(window.ethereum);\r\n    if (typeof web3 !== 'undefined') {\r\n        var abi = JSON.parse(nftManagerAbi);\r\n        var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\r\n        var response = await myContract.methods\r\n            .startSale(price, contractAddress, tokenId)\r\n            .send({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n                to: nftManagerContractAddress,\r\n            });\r\n        console.log(\"startSale | response:\", response);\r\n        return response;\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n    }\r\n}\r\n\r\nexport async function closeSale(contractAddress, tokenId, price) {\r\n    const web3 = new Web3(window.ethereum);\r\n    if (typeof web3 !== 'undefined') {\r\n        var abi = JSON.parse(nftManagerAbi);\r\n        var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\r\n        var response = await myContract.methods\r\n            .closeSale(contractAddress, tokenId)\r\n            .send({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n                to: nftManagerContractAddress,\r\n            });\r\n        console.log(\"closeSale | response:\", response);\r\n        return response;\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n    }\r\n}\r\n\r\nexport async function buyProduct(contractAddress, tokenId, price) {\r\n    const web3 = new Web3(window.ethereum);\r\n    if (typeof web3 !== 'undefined') {\r\n        var abi = JSON.parse(nftManagerAbi);\r\n        var myContract = new web3.eth.Contract(abi, nftManagerContractAddress);\r\n        var response = await myContract.methods\r\n            .purchase(contractAddress, tokenId)\r\n            .send({\r\n                from: window.web3.currentProvider.selectedAddress,\r\n                to: nftManagerContractAddress,\r\n                price: price\r\n            });\r\n        console.log(\"closeSale | response:\", response);\r\n        return response;\r\n    } else {\r\n        console.log(\"web3 not defined\");\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}