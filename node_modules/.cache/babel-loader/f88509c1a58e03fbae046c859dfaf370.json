{"ast":null,"code":"import _slicedToArray from\"C:/Users/tarus/Documents/Marketplace-ReactJS-Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useContext,useEffect}from'react';import{Context}from'../ContextStore';import{connect,getAddress}from'../services/userData';import{Form,Button,Spinner,Alert}from'react-bootstrap';import{Link}from'react-router-dom';import SimpleSider from'../components/Siders/SimpleSider';// import useMetaMask from '../hooks/metamask';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(_ref){var history=_ref.history;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),alertShow=_useState4[0],setAlertShow=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),address=_useState8[0],setAddress=_useState8[1];// const { connect, disconnect, isActive, account, shouldDisable } = useMetaMask()\nvar _useContext=useContext(Context),setUserData=_useContext.setUserData;var handleSubmitLogin=function handleSubmitLogin(e){e.preventDefault();setLoading(true);// loginUser(user)\nconnect().then(function(res){// if (!res.error) {\n// setUserData(res.user)\nvar ad=getAddress();console.log(\"hello yo\"+ad);setAddress(ad);console.log(\"hello yo\"+address);setUserData(ad);history.push('/');// } else {\n//     console.log(\"FFFFFFFFFFFF4\");\n//     setLoading(false);\n//     setError(res.error.message);\n//     setAlertShow(true);\n// }\n}).catch(function(err){return console.error('error from login: ',err);});};// useEffect(() => {\n//     console.log(\"hello yo\" + address);\n//     setUserData(address);\n// }, [address]);\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container auth-form\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"auth-heading\",style:{color:\"white\"},children:\"Sign In\"}),/*#__PURE__*/_jsxs(Form,{className:\"col-lg-6\",onSubmit:handleSubmitLogin,children:[alertShow&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",onClose:function onClose(){return setAlertShow(false);},dismissible:true,children:/*#__PURE__*/_jsx(\"p\",{children:error})}),loading?/*#__PURE__*/_jsxs(Button,{className:\"col-lg-12 btnAuth\",variant:\"dark\",disabled:true,children:[\"Please wait... \",/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})]}):/*#__PURE__*/_jsx(Button,{variant:\"dark\",className:\"col-lg-12 btnAuth\",type:\"submit\",children:\"Connect To Metamask\"})]})]})});}export default Login;","map":{"version":3,"sources":["C:/Users/tarus/Documents/Marketplace-ReactJS-Project/client/src/Pages/Login.js"],"names":["useState","useContext","useEffect","Context","connect","getAddress","Form","Button","Spinner","Alert","Link","SimpleSider","Login","history","loading","setLoading","alertShow","setAlertShow","error","setError","address","setAddress","setUserData","handleSubmitLogin","e","preventDefault","then","res","ad","console","log","push","catch","err","color"],"mappings":"8IAAA,OAASA,QAAT,CAAmBC,UAAnB,CAA+BC,SAA/B,KAAgD,OAAhD,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,sBAApC,CACA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,OAAvB,CAAgCC,KAAhC,KAA6C,iBAA7C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,kCAAxB,CACA;6IAEA,QAASC,CAAAA,KAAT,MAA4B,IAAXC,CAAAA,OAAW,MAAXA,OAAW,eACMb,QAAQ,CAAC,KAAD,CADd,wCACjBc,OADiB,eACRC,UADQ,8BAEUf,QAAQ,CAAC,KAAD,CAFlB,yCAEjBgB,SAFiB,eAENC,YAFM,8BAGEjB,QAAQ,CAAC,IAAD,CAHV,yCAGjBkB,KAHiB,eAGVC,QAHU,8BAIMnB,QAAQ,CAAC,EAAD,CAJd,yCAIjBoB,OAJiB,eAIRC,UAJQ,eAKxB;AALwB,gBAMApB,UAAU,CAACE,OAAD,CANV,CAMhBmB,WANgB,aAMhBA,WANgB,CAQxB,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,CAAD,CAAO,CAC7BA,CAAC,CAACC,cAAF,GACAV,UAAU,CAAC,IAAD,CAAV,CACA;AACAX,OAAO,GAAGsB,IAAV,CAAe,SAAAC,GAAG,CAAI,CACd;AACI;AACA,GAAIC,CAAAA,EAAE,CAAGvB,UAAU,EAAnB,CACAwB,OAAO,CAACC,GAAR,CAAY,WAAaF,EAAzB,EACAP,UAAU,CAACO,EAAD,CAAV,CACAC,OAAO,CAACC,GAAR,CAAY,WAAaV,OAAzB,EACAE,WAAW,CAACM,EAAD,CAAX,CACAf,OAAO,CAACkB,IAAR,CAAa,GAAb,EACJ;AACA;AACA;AACA;AACA;AACA;AACH,CAfL,EAeOC,KAfP,CAea,SAAAC,GAAG,QAAIJ,CAAAA,OAAO,CAACX,KAAR,CAAc,oBAAd,CAAoCe,GAApC,CAAJ,EAfhB,EAgBH,CApBD,CAsBA;AACA;AACA;AACA;AAEA,mBACI,sCACI,aAAK,SAAS,CAAC,qBAAf,wBACI,WAAI,SAAS,CAAC,cAAd,CAA6B,KAAK,CAAE,CAACC,KAAK,CAAC,OAAP,CAApC,qBADJ,cAEI,MAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,CAA2B,QAAQ,CAAEX,iBAArC,WACKP,SAAS,eACN,KAAC,KAAD,EAAO,OAAO,CAAC,QAAf,CAAwB,OAAO,CAAE,yBAAMC,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAAjC,CAA4D,WAAW,KAAvE,uBACI,mBACKC,KADL,EADJ,EAFR,CAQKJ,OAAO,cACJ,MAAC,MAAD,EAAQ,SAAS,CAAC,mBAAlB,CAAsC,OAAO,CAAC,MAA9C,CAAqD,QAAQ,KAA7D,0CACmB,KAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,EADnB,GADI,cAKJ,KAAC,MAAD,EAAQ,OAAO,CAAC,MAAhB,CAAuB,SAAS,CAAC,mBAAjC,CAAqD,IAAI,CAAC,QAA1D,iCAbR,GAFJ,GADJ,EADJ,CAyBH,CAED,cAAeF,CAAAA,KAAf","sourcesContent":["import { useState, useContext, useEffect } from 'react';\r\nimport { Context } from '../ContextStore';\r\nimport { connect, getAddress } from '../services/userData'\r\nimport { Form, Button, Spinner, Alert } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport SimpleSider from '../components/Siders/SimpleSider';\r\n// import useMetaMask from '../hooks/metamask';\r\n\r\nfunction Login({ history }) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [alertShow, setAlertShow] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [address, setAddress] = useState(\"\");\r\n    // const { connect, disconnect, isActive, account, shouldDisable } = useMetaMask()\r\n    const { setUserData } = useContext(Context)\r\n\r\n    const handleSubmitLogin = (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        // loginUser(user)\r\n        connect().then(res => {\r\n                // if (!res.error) {\r\n                    // setUserData(res.user)\r\n                    var ad = getAddress();\r\n                    console.log(\"hello yo\" + ad);\r\n                    setAddress(ad);\r\n                    console.log(\"hello yo\" + address);\r\n                    setUserData(ad);\r\n                    history.push('/')\r\n                // } else {\r\n                //     console.log(\"FFFFFFFFFFFF4\");\r\n                //     setLoading(false);\r\n                //     setError(res.error.message);\r\n                //     setAlertShow(true);\r\n                // }\r\n            }).catch(err => console.error('error from login: ', err))\r\n    }\r\n    \r\n    // useEffect(() => {\r\n    //     console.log(\"hello yo\" + address);\r\n    //     setUserData(address);\r\n    // }, [address]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container auth-form\">\r\n                <h1 className=\"auth-heading\" style={{color:\"white\"}}>Sign In</h1>\r\n                <Form className=\"col-lg-6\" onSubmit={handleSubmitLogin}>\r\n                    {alertShow &&\r\n                        <Alert variant=\"danger\" onClose={() => setAlertShow(false)} dismissible>\r\n                            <p>\r\n                                {error}\r\n                            </p>\r\n                        </Alert>\r\n                    }\r\n                    {loading ?\r\n                        <Button className=\"col-lg-12 btnAuth\" variant=\"dark\" disabled >\r\n                            Please wait... <Spinner animation=\"border\" />\r\n                        </Button>\r\n                        :\r\n                        <Button variant=\"dark\" className=\"col-lg-12 btnAuth\" type=\"submit\">\r\n                            Connect To Metamask\r\n                        </Button>\r\n                    }\r\n                </Form>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}